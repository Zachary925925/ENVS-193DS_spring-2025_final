---
title: "ES193DS Spring final"
format: html
author: Zach Wang
date: 2025-06-08
---

```{r setup}
library(tidyverse)
library(lubridate)
library(ggplot2)
library(car)
library(scales)

nest_boxes <- read_csv("data/occdist.csv")

```

# Problem 1

## a.

In part 1, they used \_\_\_\_\_\_\_. In part 2, they used \_\_\_\_\_\_\_.

# Problem 2

## a.

```{r}


sst <- read_csv("data/SST_update2023.csv") # Read in the data

# Clean
sst_clean <- sst |>
  mutate(year = as.factor(year(ymd(date)))) |> # Extract year 
  mutate(month = factor(month(ymd(date), 
                              label = TRUE, abbr = TRUE), # extract month
                        levels = month.abb, 
                        ordered = TRUE)) |>
  group_by(year, month) |> # Group by year and month
  summarize(mean_monthly_sst = mean(temp, na.rm = TRUE), 
            .groups = "drop")   # mean monthly SST


sst_clean |> slice_sample(n = 5) # display 5 random rows 
str(sst_clean) #structure of sst_clean


```

## b.

```{r}


sst_filtered <- sst_clean |> # Filter data for 2018 to 2023
  filter(year %in% as.character(2018:2023))

# Create the plot
ggplot(sst_filtered, aes(x = month, y = mean_monthly_sst, group = year, color = year)) +
  # lines and points
  geom_line() +
  geom_point() +
  
  scale_color_manual(
    values = colorRampPalette(c("lightblue",  # Color gradient from light to dark
                                "darkblue"))(length(unique(sst_filtered$year)))
  ) +
  labs(  # labels and text
    x = "Month",
    y = "Mean monthly sea surface temperature (Â°C)",
    color = "Year"
  ) +
  
  
  scale_x_discrete(drop = FALSE) + #  x-axis labels to display months in order
  
  theme( # make legend
    legend.position = c(0.1, 0.75),    # Adjust position
    legend.background = element_blank(), # No outline for legend box
    panel.border = element_rect(color = "black", fill = NA), #panel outline
    panel.background = element_rect(fill = "white"), # background color
    panel.grid = element_blank() 
  )




```

# Problem 3
## a.
For 4 different columns:

sp:
1 means the nest box was occupied by a Swift Parrot for breeding during that season.
0 means it was either empty or used by a different species.

cs:
1 means the box was occupied by a Common Starling.
0 means it was occupied by another species or was empty.

tm:
1 means occupancy by a Tree Martin.
0 means it was used by another species or unoccupied.

e:
1 means that the box remained unoccupied (empty).
0 means it was occupied by any bird species.

## b.


















# Problem 4

## a.
In homework 2, my data is represented by scatter plot. To read the data, I will have to combine the location of points and axes. But in homework 3, I use triangle shape to represent each individual observation (Width, Height, Bar). 

The two visualizations both are presenting individual observations. 

In both visualizations you will be able to see counts and relation between variables. But if I arrange my visualization from homework 3 in time order, you can see by sleeping time trend through time. You can also see extra information in the data set such as if I did a running or the average heart rate of that day.

I was told that I could add more variables into this visualization. So other than using the width and height of triangles to represent burned calories and sleeping time, I try to add a bar at the to to show if I did running or not. I also try to tier the HRV into (40-45 46-50 51-55 56-60) four levels, and give each of them a different color to show the HRV level at that day. 










